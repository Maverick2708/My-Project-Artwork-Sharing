@{
    Layout = "~/Views/Shared/defaultAuthor.cshtml";
}
<style>
    #comments {
        max-width: 600px;
        margin: 20px auto;
        font-family: 'Arial', sans-serif;
    }

    .comment {
        background-color: #f8f8f8;
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
        position: relative;
    }

    .like {
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
        color: #e44d26; /* Màu sắc mặc định của trái tim */
    }

    color: black; /* Màu sắc khi số lượng thả tim là 0 */
    }

    .like:hover {
        color: #e44d26; /* Màu sắc khi hover (có thể giữ nguyên màu đỏ) */
    }

    .comment-input {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .comment-btn {
        background-color: #4caf50;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .comment-input-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .comment-input {
        flex: 1;
        margin-right: 10px; /* Adjust the spacing between input and button as needed */
    }

    .comment-btn {
        flex-shrink: 0; /* Prevent button from shrinking */
    }
</style>

<section class="bg-gray200 pt-5 pb-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-7">
                <article class="card">
                    <img class="card-img-top mb-2" src="https://images.unsplash.com/photo-1490645935967-10de6ba17061?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=e0245bb4e87077312cc3d102e68c1efd&auto=format&fit=crop&w=735&q=80" alt="Card image">
                    <div class="card-body">
                        <h1 class="card-title display-4">
                            Sushi Rolls
                        </h1>
                        <ul>
                            <li>5 cups short-grain sushi rice</li>
                            <li>6 cups water</li>
                            <li>1/2 cup rice vinegar</li>
                            <li>2 tablespoons sugar</li>
                            <li>A teaspoon of salt</li>
                        </ul>
                        <div id="ratingContainer" class="d-flex align-items-center">
                            <div id="starRatingContainer"></div>
                            <span id="likeCount" class="ml-2" onclick="addLike()"><i id="heartIcon" class="fa fa-heart text-danger"></i> <span id="likeCountValue">0</span></span>
                        </div>
                        <!-- Begin Comments -replace demowebsite with your own id
                        <!-- Bình luận -->
                        <div id="comments" class="mt-4">
                            <!-- Hiển thị danh sách bình luận từ cơ sở dữ liệu -->
                        </div>
                        <div class="comment-input-container">
                            <input type="text" id="commentInput" class="comment-input" placeholder="Enter your comment">
                            <button type="button" class="comment-btn" onclick="addComment()">Send</button>
                        </div>
                        <script>
                            // Hàm để thêm bình luận mới
                            function addComment() {
                                var commentInput = document.getElementById('commentInput').value;

                                // Kiểm tra xem có nội dung bình luận hay không
                                if (commentInput.trim() === '') {
                                    alert('Vui lòng nhập nội dung bình luận.');
                                    return;
                                }

                                // Tạo một đối tượng bình luận (có thể có thêm thông tin như user_id, timestamp, ...)
                                var comment = {
                                    content: commentInput,
                                    likes: 0 // Số lượng thả tim ban đầu
                                };

                                // Thêm bình luận vào danh sách hiển thị
                                displayComment(comment);

                                // Đồng thời, bạn cũng có thể gửi dữ liệu lên máy chủ để lưu vào cơ sở dữ liệu
                                // Sử dụng AJAX hoặc Fetch API để gửi dữ liệu

                                // Reset input sau khi thêm bình luận
                                document.getElementById('commentInput').value = '';
                            }

                            // Hàm để hiển thị bình luận
                            function displayComment(comment) {
                                var commentsContainer = document.getElementById('comments');

                                // Tạo một phần tử HTML để hiển thị bình luận
                                var commentElement = document.createElement('div');
                                commentElement.className = 'comment';
                                commentElement.innerHTML = `
                                        <p>${comment.content}</p>
                                        <span class="like" onclick="likeComment(this)">&hearts; <span class="like-count">${comment.likes}</span></span>
                                    `;
                                if (comment.likes > 0) {
                                    commentElement.querySelector('.like').classList.add('liked');
                                }
                                // Thêm phần tử vào container
                                commentsContainer.appendChild(commentElement);
                            }

                            // Hàm để thả tim cho bình luận
                            function likeComment(span) {
                                var likeCountElement = span.querySelector('.like-count');
                                var likeCount = parseInt(likeCountElement.innerText, 10);

                                // Kiểm tra xem đã thả tim chưa
                                if (span.classList.contains('liked')) {
                                    likeCount--;
                                    span.classList.remove('liked');
                                } else {
                                    likeCount++;
                                    span.classList.add('liked');
                                }

                                likeCountElement.innerText = likeCount;

                                // Bạn cũng có thể gửi yêu cầu lên máy chủ để cập nhật số lượng thả tim trong cơ sở dữ liệu
                            }
                            var starRating = 3; // Replace with the actual database value
                            var likeCountValue = 0;

                            var isLiked = false; // Trạng thái ban đầu là chưa thả tim
                            var likeCountValue = 0;
                            // Function to generate the star rating
                            function generateStarRating() {
                                var starRatingContainer = document.getElementById('starRatingContainer');
                                starRatingContainer.innerHTML = ''; // Clear previous content

                                // Create a star for each rating
                                for (var i = 0; i < starRating; i++) {
                                    var star = document.createElement('i');
                                    star.className = 'fa fa-star text-warning'; // Assuming FontAwesome for stars
                                    starRatingContainer.appendChild(star);
                                }

                                // You can add half stars or empty stars based on your requirements
                            }
                            function addLike() {
                                if (isLiked) {
                                    // Nếu đã thả tim, ẩn tim và giảm số lượng người thả tim
                                    isLiked = false;
                                    likeCountValue--;
                                } else {
                                    // Nếu chưa thả tim, hiển thị tim và tăng số lượng người thả tim
                                    isLiked = true;
                                    likeCountValue++;
                                }

                                // Cập nhật số lượng người thả tim
                                document.getElementById('likeCountValue').innerText = likeCountValue;

                                // Thay đổi trạng thái trái tim (đỏ hoặc đen)
                                var heartIcon = document.getElementById('heartIcon');
                                heartIcon.classList.toggle('text-danger', isLiked);

                                // Bạn cũng có thể gửi yêu cầu lên máy chủ để cập nhật số lượng thả tim trong cơ sở dữ liệu
                            }
                            // Call the function to generate the star rating
                            generateStarRating();
                        </script>
                        <!--End Comments
                        ================================================== -->
                    </div>
                </article>
            </div>
        </div>
    </div>
    <div class="container-fluid mt-5">
        <div class="row">
            <h5 class="font-weight-bold">More like this</h5>
            <div class="card-columns">
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1518707399486-6d702a84ff00?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=b5bb16fa7eaed1a1ed47614488f7588d&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1519408299519-b7a0274f7d67?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=d4891b98f4554cc55eab1e4a923cbdb1&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1506706435692-290e0c5b4505?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=0bb464bb1ceea5155bc079c4f50bc36a&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1512355144108-e94a235b10af?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=c622d56d975113a08c71c912618b5f83&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1518542331925-4e91e9aa0074?ixlib=rb-0.3.5&s=6958cfb3469de1e681bf17587bed53be&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1513028179155-324cfec2566c?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=32ce1df4016dadc177d6fce1b2df2429&auto=format&fit=crop&w=350&q=80" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1516601255109-506725109807?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=ce4f3db9818f60686e8e9b62d4920ce5&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1505210512658-3ae58ae08744?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=2ef2e23adda7b89a804cf232f57e3ca3&auto=format&fit=crop&w=333&q=80" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1488353816557-87cd574cea04?ixlib=rb-0.3.5&s=06371203b2e3ad3e241c45f4e149a1b3&auto=format&fit=crop&w=334&q=80" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
                <div class="card card-pin">
                    <img class="card-img" src="https://images.unsplash.com/photo-1518450757707-d21c8c53c8df?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=c88b5f311958f841525fdb01ab3b5deb&auto=format&fit=crop&w=500&q=60" alt="Card image">
                    <div class="overlay">
                        <h2 class="card-title title">Some Title</h2>
                        <div class="more">
                            <a href="post.html">
                                <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> More
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
